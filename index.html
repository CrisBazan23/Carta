<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta especial</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- NotificaciÃ³n inicial -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <div class="notification-icon">ðŸŽ„</div>
            <div class="notification-text">
                <p class="notification-title">Tienes un nuevo mensaje</p>
                <p class="notification-subtitle">Revisa tu carta especial</p>
            </div>
            <div class="notification-close">&times;</div>
        </div>
    </div>

    <!-- Carta animada -->
     <div class="click-hint">Click en el sobre ðŸ‘‡</div>

    <div class="letter-container">
        <div class="letter-image" id="letterContainer">
            <div class="animated-mail">
                <div class="back-fold"></div>
                <div class="letter">
                    <div class="letter-border"></div>
                    <div class="letter-title"></div>
                    <div class="letter-context"></div>
                    <div class="letter-stamp">
                        <div class="letter-stamp-inner"></div>
                    </div>
                </div>
                <div class="top-fold"></div>
                <div class="body"></div>
                <div class="left-fold"></div>
            </div>
            <div class="shadow"></div>
        </div>
        <div class="instruction-text">
        </div>
    </div>

    <!-- Modal de la carta abierta -->
    <div id="letterModal" class="modal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="letter-paper" id="letterPaper">
                <div class="letter-header">
                    <h1 id="letterTitle">Carta Especial</h1>
                    <div class="letter-date" id="letterDate">25 de diciembre, 2025</div>
                </div>
                <div class="letter-body" id="letterBody">
                    <p class="greeting" id="greeting"></p>
                    <p id="paragraph1"></p>
                    <p id="paragraph2"></p>
                    <p id="paragraph3"></p>
                    <p id="paragraph4"></p>
                    <p class="signature" id="signature1"></p>
                    <p class="signature-name" id="signature2"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje de amor final -->
    <div id="loveMessage" class="love-message">
        <p id="loveText"></p>
    </div>

    <script>
        // Textos para el efecto typing
        const letterTexts = {
            greeting: "Para cami,",
            paragraph1: "Feliz Navidad, Cami ðŸŽ„",
            paragraph2: "Espero que la hayas pasado muy bonito hoy. QuerÃ­a decirte tambien que me gusta mucho cÃ³mo eres.",
            paragraph3: "CÃ³mo hablas y hasta lo bien que hueles jsjs. OjalÃ¡ tambiÃ©n te cuides un poco mÃ¡s y no tomes tan seguido y bueno, aunque nos conocemos hace poco, igual querÃ­a decirte que te quiero y me importas. Que tengas una linda Navidad.",
            signature1: "Con cariÃ±o y admiraciÃ³n,",
            signature2: "bazan :3"
        };

        const loveMessageText = "Eres muy especial para mi, Feliz Navidad! ðŸŽ„â¤ï¸";

        // FunciÃ³n para efecto typing
        function typeText(element, text, speed = 30) {
            return new Promise((resolve) => {
                element.textContent = '';
                let i = 0;
                const timer = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(timer);
                        resolve();
                    }
                }, speed);
            });
        }

        // FunciÃ³n para mostrar la carta con typing
        async function showLetterWithTyping() {
            const modal = document.getElementById('letterModal');
            const letterPaper = document.getElementById('letterPaper');
            
            // Mostrar modal con animaciÃ³n
            modal.style.display = 'block';
            modal.classList.add('modal-show');
            
            // AnimaciÃ³n de entrada del papel
            setTimeout(() => {
                letterPaper.classList.add('letter-entrance');
            }, 100);

            // Esperar a que termine la animaciÃ³n de entrada
            setTimeout(async () => {
                // Typing secuencial de cada pÃ¡rrafo
                await typeText(document.getElementById('greeting'), letterTexts.greeting, 40);
                await new Promise(resolve => setTimeout(resolve, 500));
                
                await typeText(document.getElementById('paragraph1'), letterTexts.paragraph1, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph2'), letterTexts.paragraph2, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph3'), letterTexts.paragraph3, 25);
                await new Promise(resolve => setTimeout(resolve, 300));
                
                await typeText(document.getElementById('paragraph4'), letterTexts.paragraph4, 25);
                await new Promise(resolve => setTimeout(resolve, 500));
                
                await typeText(document.getElementById('signature1'), letterTexts.signature1, 35);
                await new Promise(resolve => setTimeout(resolve, 200));
                
                await typeText(document.getElementById('signature2'), letterTexts.signature2, 35);
            }, 800);
        }

        // FunciÃ³n para cerrar la carta
        function closeLetter() {
            const modal = document.getElementById('letterModal');
            const letterPaper = document.getElementById('letterPaper');
            const loveMessage = document.getElementById('loveMessage');
            
            // AnimaciÃ³n de salida
            letterPaper.classList.add('letter-exit');
            
            setTimeout(() => {
                modal.classList.remove('modal-show');
                setTimeout(() => {
                    modal.style.display = 'none';
                    letterPaper.classList.remove('letter-entrance', 'letter-exit');
                    
                    // Limpiar textos
                    Object.keys(letterTexts).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) element.textContent = '';
                    });
                    
                    // Mostrar mensaje de amor
                    loveMessage.classList.add('show');
                    typeText(document.getElementById('loveText'), loveMessageText, 100);
                    
                    // Ocultar mensaje despuÃ©s de 4 segundos
                    setTimeout(() => {
                        loveMessage.classList.remove('show');
                    }, 4000);
                }, 300);
            }, 500);
        }

        // Mostrar notificaciÃ³n al cargar la pÃ¡gina
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('notification').classList.add('show');
                
                // Auto-ocultar notificaciÃ³n despuÃ©s de 5 segundos
                setTimeout(() => {
                    document.getElementById('notification').classList.remove('show');
                }, 5000);
            }, 1000);
        });

        // La notificaciÃ³n ahora solo se cierra, no abre la carta
        document.querySelector('.notification-close').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('notification').classList.remove('show');
        });

        // Solo la carta abre el modal
        document.getElementById('letterContainer').addEventListener('click', function() {
            document.getElementById('notification').classList.remove('show');
            showLetterWithTyping();
        });

        // Cerrar modal
        document.getElementById('closeModal').addEventListener('click', function() {
            closeLetter();
        });

        // Cerrar modal haciendo clic en el overlay
        document.getElementById('modalOverlay').addEventListener('click', function() {
            closeLetter();
        });
    </script>
    <div class="christmas-rain"></div>

<script>
/* ðŸŽ„ Lluvia navideÃ±a dispersa */
const icons = ["ðŸŽ„", "â„ï¸", "ðŸ›·", "â­", "ðŸŽ", "ðŸ””"];
const rainContainer = document.querySelector(".christmas-rain");

function createIcon() {
    const icon = document.createElement("div");
    icon.classList.add("christmas-icon");
    icon.textContent = icons[Math.floor(Math.random() * icons.length)];

    icon.style.left = Math.random() * 100 + "vw";
    icon.style.fontSize = (18 + Math.random() * 20) + "px";
    icon.style.animationDuration = (6 + Math.random() * 6) + "s";

    rainContainer.appendChild(icon);

    setTimeout(() => {
        icon.remove();
    }, 12000);
}

setInterval(createIcon, 300);
</script>

</body>
</html>